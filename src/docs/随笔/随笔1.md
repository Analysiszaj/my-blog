---
lang: zh-CN
title: dom结构不改变时，只改变ClassName，dom对象还是原来那个对象
description: 记录遇到的一个恶心的bug
sidebar: heading
tag: [HTML, javaScript]
category: 随笔
date: 2023-08-23
---

# dom 结构不改变时，只改变 ClassName，dom 对象还是原来那个对象

今天遇到的一个非常恶心的 bug, 特此记录一下：

## 1.bug 场景

我在 vue 项目中使用了 swiper 组件, swiper 组件通过`new Swiper(className， {})`的方式来绑定相应的 dom 节点对象.我通过`v-if`来控制 dom 元素的切换

```html
<div v-if="active === 1" class="div1">div...</div>
<div v-if="active === 2" class="div2">div...</div>
```

现在我的 swiper 组件绑定 div1

```javascript
const div1 = new Swiper('.div', {})
```

然后我将`active设置为2` 打印一下 创建的 div1 Swiper 对象，会发现， 绑定的 dom 元素，从原来的`div.div1` 变成了`div.div2`，我明明绑定的第一个， 但是他影响到了我后面的样式!!!!

总结：**dom 结构不改变时，只改变 ClassName，dom 对象还是原来那个对象**

## 2.解决方法

解决方法不重要，重要的是学到了， 我一直以为 v-if 切换掉之后，那个原先创建的 Swiper 绑定就失效了.

> 使用前一定要将前面那个 swiper 对象进行销毁
>
> swiper.destroy()

**ps:测试了一下，正常的环境下无此 bug, 只有在使用的那个低代码平台上有这个 bug**
