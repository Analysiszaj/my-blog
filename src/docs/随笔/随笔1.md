---
lang: zh-CN
title: dom结构不改变时，只改变ClassName，dom对象还是原来那个对象
description: 记录遇到的一个恶心的bug
sidebar: heading
tag: [HTML, javaScript]
category: 随笔
date: 2023-07-26
---

# dom 结构不改变时，只改变 ClassName，dom 对象还是原来那个对象

今天遇到的一个非常恶心的bug, 特此记录一下：

## 1.bug场景

我在vue项目中使用了swiper组件, swiper 组件通过`new Swiper(className， {})`的方式来绑定相应的dom节点对象.我通过`v-if`来控制dom元素的切换

```html
<div v-if="active === 1" class="div1">
    div...
</div>
<div v-if="active === 2"  class="div2">
    div...
</div>

```

现在我的swiper组件绑定div1

```javascript
const div1 = new Swiper('.div', {})
```

然后我将`active设置为2` 打印一下 创建的div1 Swiper对象，会发现， 绑定的dom元素，从原来的`div.div1` 变成了`div.div2`，我明明绑定的第一个， 但是他影响到了我后面的样式!!!!

总结：**dom 结构不改变时，只改变 ClassName，dom 对象还是原来那个对象**

## 2.解决方法

解决方法不重要，重要的是学到了， 我一直以为v-if切换掉之后，那个原先创建的Swiper 绑定就失效了.

> 使用前一定要将前面那个swiper对象进行销毁
>
> swiper.destroy()